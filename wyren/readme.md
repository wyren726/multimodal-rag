# ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼š
é…ç½®ç¯å¢ƒ
```bash
# ä½¿ç”¨condaåˆ›å»ºç¯å¢ƒï¼ˆæ¨èï¼‰
conda create -n multimodal_rag python=3.11
conda activate multimodal_rag
```
æ¥ä¸‹æ¥ä¸€é”®å®‰è£…æ ¸å¿ƒä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd pc_multimodal_rag/backend

# å®‰è£…æ ¸å¿ƒä¾èµ–åŒ…
pip install -r requirements_service.txt
```

...åé¢æŒ‰ç…§è®²ä¹‰é‡Œçš„æ“ä½œç»§ç»­è¿›è¡Œ

# ä¹‹åæ¯æ¬¡è¿è¡Œæ—¶ï¼š

åœ¨ç¬¬ä¸€ä¸ªbashçª—å£ï¼š
```bash
conda activate multimodal_rag

# å¯åŠ¨FastAPIåç«¯æœåŠ¡
python backend/main_service.py
```


åœ¨å¦ä¸€ä¸ªbashçª—å£
```bash
conda activate multimodal_rag
cd frontend/
npm run dev
```

```bash
curl -X POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \
  --header "Authorization: Bearer sk-0f97e70fc5a34051b341f0b758867166" \
  --header "Content-Type: application/json" \
  --data '{
      "model": "qwen-turbo",
      "messages": [
          {"role": "user", "content": "è¯·ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚"}
      ],
      "stream": false
  }'
```

### æ™ºèƒ½é—®ç­”çš„è¿è¡Œæµç¨‹(GPT-4o)

================================================================================
[c1b238c0] ğŸ“¥ æ”¶åˆ°è¯·æ±‚
[c1b238c0]   æ–¹æ³•: POST
[c1b238c0]   è·¯å¾„: /upload
[c1b238c0]   å®¢æˆ·ç«¯: 127.0.0.1
[c1b238c0]   User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0
[c1b238c0]   Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryDYTVpctdRQoVUJCX
================================================================================
[14:22:45] 
================================================================================
[14:22:45] ğŸ“¤ APIæ”¶åˆ°æ–‡ä»¶ä¸Šä¼ è¯·æ±‚
[14:22:45]   æ–‡ä»¶å: å¤šå…ƒç»Ÿè®¡ä½œä¸š2.pdf
[14:22:45]   Content-Type: application/pdf
================================================================================


============================================================
ğŸ“¤ å¤„ç†æ–‡ä»¶ä¸Šä¼ : å¤šå…ƒç»Ÿè®¡ä½œä¸š2.pdf
============================================================
âœ“ æ–‡ä»¶å·²ä¿å­˜: uploads/9ebe4a2e-3f4b-4ed9-b965-05de76003850.pdf

============================================================
å¿«é€Ÿæ¨¡å¼æå– - ä½¿ç”¨PyMuPDF4LLM
============================================================

æ­£åœ¨æå–PDFå†…å®¹å’Œå›¾ç‰‡...
Consider using the pymupdf_layout package for a greatly improved page layout analysis.
âœ“ æ–‡æ¡£å…± 2 é¡µ

æ­£åœ¨æ”¶é›†æå–çš„å›¾ç‰‡...

============================================================
âœ“ å¿«é€Ÿæå–å®Œæˆ
  - é¡µæ•°: 2
  - å›¾ç‰‡æ•°: 0
  - Markdowné•¿åº¦: 1834 å­—ç¬¦
============================================================

âœ“ PDFç¼©ç•¥å›¾å·²ç”Ÿæˆ: previews/9ebe4a2e-3f4b-4ed9-b965-05de76003850_thumb.png
ğŸ–¼ï¸ å¼€å§‹åˆ†æPDFä¸­çš„å›¾ç‰‡é¡µé¢...
  æœªå‘ç°éœ€è¦VLMåˆ†æçš„å›¾ç‰‡é¡µé¢

ğŸ“¥ æ·»åŠ æ–‡æ¡£åˆ°å‘é‡åº“: å¤šå…ƒç»Ÿè®¡ä½œä¸š2.pdf
  åˆ†å‰²ä¸º 3 ä¸ªæ–‡æœ¬å—
HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings "HTTP/1.1 200 OK"
HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings "HTTP/1.1 200 OK"
HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings "HTTP/1.1 200 OK"
âœ“ æ–‡æ¡£å·²æ·»åŠ åˆ°å‘é‡åº“ï¼Œå…± 3 ä¸ªå—

âœ“ æ–‡ä»¶ä¸Šä¼ å¹¶ç´¢å¼•å®Œæˆ
  æ–‡ä»¶ID: 9ebe4a2e-3f4b-4ed9-b965-05de76003850
  æ–‡ä»¶ç±»å‹: PDF
  åˆ†å—æ•°: 3
[14:22:47] 
================================================================================
âœ“ æ–‡ä»¶ä¸Šä¼ æˆåŠŸ
[14:22:47]   æ¶ˆæ¯: æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œå·²åˆ†å‰²ä¸º 3 ä¸ªæ–‡æœ¬å—å¹¶å»ºç«‹ç´¢å¼•
================================================================================


================================================================================
[c1b238c0] ğŸ“¤ è¿”å›å“åº”
[c1b238c0]   çŠ¶æ€ç : 200
[c1b238c0]   è€—æ—¶: 1.930ç§’
================================================================================

127.0.0.1:35802 - "POST /upload HTTP/1.1" 200 OK

================================================================================
[4088feb3] ğŸ“¥ æ”¶åˆ°è¯·æ±‚
[4088feb3]   æ–¹æ³•: POST
[4088feb3]   è·¯å¾„: /ask
[4088feb3]   å®¢æˆ·ç«¯: 127.0.0.1
[4088feb3]   User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0
[4088feb3]   Content-Type: application/json
================================================================================
[14:22:47] 
================================================================================
[14:22:47] ğŸ¤– APIæ”¶åˆ°æ™ºèƒ½é—®ç­”è¯·æ±‚
[14:22:47]   é—®é¢˜: å¤šå…ƒä½œä¸š2ä»€ä¹ˆæ—¶å€™æˆªè‡³æäº¤ï¼Ÿ
[14:22:47]   TopK: 3
================================================================================


============================================================
ğŸ¤– æ™ºèƒ½é—®ç­”
  é—®é¢˜: å¤šå…ƒä½œä¸š2ä»€ä¹ˆæ—¶å€™æˆªè‡³æäº¤ï¼Ÿ
============================================================
  é—®é¢˜ç±»å‹: general_query

ğŸ” æ‰§è¡Œå‘é‡æ£€ç´¢: å¤šå…ƒä½œä¸š2ä»€ä¹ˆæ—¶å€™æˆªè‡³æäº¤ï¼Ÿ...
HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings "HTTP/1.1 200 OK"
Failed to send telemetry event CollectionQueryEvent: capture() takes 1 positional argument but 3 were given
âœ“ æ‰¾åˆ° 3 ä¸ªç›¸å…³ç»“æœ
  è·ç¦»èŒƒå›´: 0.9891 ~ 0.9891
  ç›¸ä¼¼åº¦èŒƒå›´: 0.5027 ~ 0.5027
Retrying request to /chat/completions in 0.452987 seconds
Retrying request to /chat/completions in 0.806980 seconds
LLMç”Ÿæˆç­”æ¡ˆå¤±è´¥: Connection error.
âœ“ ç­”æ¡ˆå·²ç”Ÿæˆ
  ç½®ä¿¡åº¦: 0.50
  æ¥æºæ•°: 3
[14:23:02] 
================================================================================
[14:23:02] âœ“ ç­”æ¡ˆå·²ç”Ÿæˆ
[14:23:02]   é—®é¢˜ç±»å‹: general_query
[14:23:02]   ç½®ä¿¡åº¦: 0.50
[14:23:02]   æ¥æºæ•°: 3
================================================================================


================================================================================
[4088feb3] ğŸ“¤ è¿”å›å“åº”
[4088feb3]   çŠ¶æ€ç : 200
[4088feb3]   è€—æ—¶: 14.505ç§’
================================================================================

127.0.0.1:35810 - "POST /ask HTTP/1.1" 200 OK

### æ™ºèƒ½é—®ç­”çš„è¿è¡Œæµç¨‹ï¼ˆQwen-VLï¼‰
================================================================================
[44290c0a] ğŸ“¥ æ”¶åˆ°è¯·æ±‚
[44290c0a]   æ–¹æ³•: POST
[44290c0a]   è·¯å¾„: /ask
[44290c0a]   å®¢æˆ·ç«¯: 127.0.0.1
[44290c0a]   User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0
[44290c0a]   Content-Type: application/json
================================================================================
[15:00:02] 
================================================================================
[15:00:02] ğŸ¤– APIæ”¶åˆ°æ™ºèƒ½é—®ç­”è¯·æ±‚
[15:00:02]   é—®é¢˜: å¤šå…ƒç»Ÿè®¡ä½œä¸š2çš„æˆªæ­¢æ—¥æœŸæ˜¯ä»€ä¹ˆæ—¶å€™
[15:00:02]   TopK: 3
================================================================================


============================================================
ğŸ¤– æ™ºèƒ½é—®ç­”
  é—®é¢˜: å¤šå…ƒç»Ÿè®¡ä½œä¸š2çš„æˆªæ­¢æ—¥æœŸæ˜¯ä»€ä¹ˆæ—¶å€™
============================================================
  é—®é¢˜ç±»å‹: general_query

ğŸ” æ‰§è¡Œå‘é‡æ£€ç´¢: å¤šå…ƒç»Ÿè®¡ä½œä¸š2çš„æˆªæ­¢æ—¥æœŸæ˜¯ä»€ä¹ˆæ—¶å€™...
HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/embeddings "HTTP/1.1 200 OK"
âœ“ æ‰¾åˆ° 3 ä¸ªç›¸å…³ç»“æœ
  è·ç¦»èŒƒå›´: 0.7280 ~ 0.7280
  ç›¸ä¼¼åº¦èŒƒå›´: 0.5787 ~ 0.5787
HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
âœ“ ç­”æ¡ˆå·²ç”Ÿæˆ
  ç½®ä¿¡åº¦: 0.58
  æ¥æºæ•°: 3
[15:00:05] 
================================================================================
[15:00:05] âœ“ ç­”æ¡ˆå·²ç”Ÿæˆ
[15:00:05]   é—®é¢˜ç±»å‹: general_query
[15:00:05]   ç½®ä¿¡åº¦: 0.58
[15:00:05]   æ¥æºæ•°: 3
================================================================================


================================================================================
[44290c0a] ğŸ“¤ è¿”å›å“åº”
[44290c0a]   çŠ¶æ€ç : 200
[44290c0a]   è€—æ—¶: 3.178ç§’
================================================================================

127.0.0.1:40762 - "POST /ask HTTP/1.1" 200 OK